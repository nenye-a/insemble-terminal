# Migration `20200529161013-news-table-initial`

This migration has been generated by RaymondAnggara at 5/29/2020, 4:10:13 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."NewsData" (
    "description" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "link" text  NOT NULL DEFAULT '',
    "news" text   ,
    "published" text  NOT NULL DEFAULT '',
    "relevance" Decimal(65,30)  NOT NULL DEFAULT 0,
    "source" text  NOT NULL DEFAULT '',
    "title" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."CompareNewsData" (
    "description" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "link" text  NOT NULL DEFAULT '',
    "news" text   ,
    "published" text  NOT NULL DEFAULT '',
    "relevance" Decimal(65,30)  NOT NULL DEFAULT 0,
    "source" text  NOT NULL DEFAULT '',
    "title" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."News" (
    "businessTag" text   ,
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "locationTag" text   ,
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."_ComparationTagToNews" (
    "A" text  NOT NULL ,
    "B" text  NOT NULL 
) 

CREATE UNIQUE INDEX "_ComparationTagToNews_AB_unique" ON "public"."_ComparationTagToNews"("A","B")

ALTER TABLE "public"."NewsData" ADD FOREIGN KEY ("news") REFERENCES "public"."News"("id") ON DELETE SET NULL

ALTER TABLE "public"."CompareNewsData" ADD FOREIGN KEY ("news") REFERENCES "public"."News"("id") ON DELETE SET NULL

ALTER TABLE "public"."News" ADD FOREIGN KEY ("locationTag") REFERENCES "public"."LocationTag"("id") ON DELETE SET NULL

ALTER TABLE "public"."News" ADD FOREIGN KEY ("businessTag") REFERENCES "public"."BusinessTag"("id") ON DELETE SET NULL

ALTER TABLE "public"."_ComparationTagToNews" ADD FOREIGN KEY ("A") REFERENCES "public"."ComparationTag"("id") ON DELETE CASCADE

ALTER TABLE "public"."_ComparationTagToNews" ADD FOREIGN KEY ("B") REFERENCES "public"."News"("id") ON DELETE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200527152336-comparation-perfomance..20200529161013-news-table-initial
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -110,8 +110,9 @@
   id              String            @default(cuid()) @id
   locationTag     LocationTag?
   businessTag     BusinessTag?
   performance     Performance[]
+  news            News[]
 }
 model Performance {
   id              String            @default(cuid()) @id
@@ -124,8 +125,39 @@
   createdAt       DateTime          @default(now())
   updatedAt       DateTime          @updatedAt
 }
+model NewsData {
+  id            String @default(cuid()) @id
+  title         String
+  link          String
+  published     String
+  source        String
+  description   String 
+  relevance     Float
+}
+
+model CompareNewsData {
+  id            String @default(cuid()) @id
+  title         String
+  link          String
+  published     String
+  source        String
+  description   String 
+  relevance     Float
+}
+
+model News {
+  id              String            @default(cuid()) @id
+  locationTag     LocationTag?
+  businessTag     BusinessTag?
+  comparationTags ComparationTag[]
+  data            NewsData[]
+  compareData     CompareNewsData[]
+  createdAt       DateTime          @default(now())
+  updatedAt       DateTime          @updatedAt
+}
+
 model SearchLog {
   id              String            @default(cuid()) @id
   locationTag     LocationTag?
   businessTag     BusinessTag?
```


