# Migration `20200519160618-search-log-init`

This migration has been generated by RaymondAnggara at 5/19/2020, 4:06:18 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."SearchLog" (
    "businessTag" text   ,
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "locationTag" text   ,
    "reviewTag" text   ,
    "user" text   ,
    PRIMARY KEY ("id")
) 

ALTER TABLE "public"."SearchLog" ADD FOREIGN KEY ("locationTag") REFERENCES "public"."LocationTag"("id") ON DELETE SET NULL

ALTER TABLE "public"."SearchLog" ADD FOREIGN KEY ("businessTag") REFERENCES "public"."BusinessTag"("id") ON DELETE SET NULL

ALTER TABLE "public"."SearchLog" ADD FOREIGN KEY ("user") REFERENCES "public"."User"("id") ON DELETE SET NULL
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200518160051-performance-data-model-init..20200519160618-search-log-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -28,8 +28,15 @@
   CITY
   STATE
 }
+enum ReviewTag {
+  PERFORMANCE
+  NEWS
+  OWNERSHIP
+  COVERAGE
+}
+
 model LocationTag {
   id     String          @default(cuid()) @id
   type   LocationTagType
   params String
@@ -51,8 +58,9 @@
   company       String
   title         String?
   description   String?
   address       String?
+  searchLog     SearchLog[]
   pendingEmail  Boolean  @default(false)
   createdAt     DateTime @default(now())
 }
@@ -97,4 +105,12 @@
   data            PerformanceData[]
   createdAt       DateTime          @default(now())
   updatedAt       DateTime          @updatedAt
 }
+
+model SearchLog {
+  id              String            @default(cuid()) @id
+  locationTag     LocationTag?
+  businessTag     BusinessTag?
+  reviewTag       ReviewTag?
+  createdAt       DateTime          @default(now())
+}
```


