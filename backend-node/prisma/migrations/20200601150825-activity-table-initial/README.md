# Migration `20200601150825-activity-table-initial`

This migration has been generated by Nenye at 6/1/2020, 3:08:25 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."ActivityTimes" (
    "AM1" integer   ,
    "AM10" integer   ,
    "AM11" integer   ,
    "AM12" integer   ,
    "AM2" integer   ,
    "AM3" integer   ,
    "AM4" integer   ,
    "AM5" integer   ,
    "AM6" integer   ,
    "AM7" integer   ,
    "AM8" integer   ,
    "AM9" integer   ,
    "PM1" integer   ,
    "PM10" integer   ,
    "PM11" integer   ,
    "PM12" integer   ,
    "PM2" integer   ,
    "PM3" integer   ,
    "PM4" integer   ,
    "PM5" integer   ,
    "PM6" integer   ,
    "PM7" integer   ,
    "PM8" integer   ,
    "PM9" integer   ,
    "id" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."ActivityData" (
    "activity" text   ,
    "activityData" text  NOT NULL ,
    "id" text  NOT NULL ,
    "location" text  NOT NULL DEFAULT '',
    "name" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."CompareActivityData" (
    "activity" text   ,
    "activityData" text  NOT NULL ,
    "id" text  NOT NULL ,
    "location" text  NOT NULL DEFAULT '',
    "name" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Activity" (
    "businessTag" text   ,
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "locationTag" text   ,
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    PRIMARY KEY ("id")
) 

ALTER TABLE "public"."ComparationTag" ADD COLUMN "activity" text   ;

ALTER TABLE "public"."ActivityData" ADD FOREIGN KEY ("activityData") REFERENCES "public"."ActivityTimes"("id") ON DELETE RESTRICT

ALTER TABLE "public"."ActivityData" ADD FOREIGN KEY ("activity") REFERENCES "public"."Activity"("id") ON DELETE SET NULL

ALTER TABLE "public"."CompareActivityData" ADD FOREIGN KEY ("activityData") REFERENCES "public"."ActivityTimes"("id") ON DELETE RESTRICT

ALTER TABLE "public"."CompareActivityData" ADD FOREIGN KEY ("activity") REFERENCES "public"."Activity"("id") ON DELETE SET NULL

ALTER TABLE "public"."Activity" ADD FOREIGN KEY ("locationTag") REFERENCES "public"."LocationTag"("id") ON DELETE SET NULL

ALTER TABLE "public"."Activity" ADD FOREIGN KEY ("businessTag") REFERENCES "public"."BusinessTag"("id") ON DELETE SET NULL

ALTER TABLE "public"."ComparationTag" ADD FOREIGN KEY ("activity") REFERENCES "public"."Activity"("id") ON DELETE SET NULL
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200529161013-news-table-initial..20200601150825-activity-table-initial
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -48,21 +48,21 @@
   params String
 }
 model User {
-  id            String   @default(cuid()) @id
-  email         String   @unique
-  avatar        String?
-  password      String
-  firstName     String
-  lastName      String
-  company       String
-  title         String?
-  description   String?
-  address       String?
-  searchLog     SearchLog[]
-  pendingEmail  Boolean  @default(false)
-  createdAt     DateTime @default(now())
+  id           String      @default(cuid()) @id
+  email        String      @unique
+  avatar       String?
+  password     String
+  firstName    String
+  lastName     String
+  company      String
+  title        String?
+  description  String?
+  address      String?
+  searchLog    SearchLog[]
+  pendingEmail Boolean     @default(false)
+  createdAt    DateTime    @default(now())
 }
 model UserSession {
   id        String   @default(cuid()) @id
@@ -71,14 +71,14 @@
   user      User
 }
 model UserRegisterVerification {
-  id            String  @default(cuid()) @id
-  email         String
-  userInput     String
-  verified      Boolean @default(false)
-  tokenEmail    String
-  tokenQuery    String
+  id         String  @default(cuid()) @id
+  email      String
+  userInput  String
+  verified   Boolean @default(false)
+  tokenEmail String
+  tokenQuery String
 }
 model UserEmailVerification {
   id         String  @default(cuid()) @id
@@ -88,63 +88,63 @@
   tokenEmail String
 }
 model PerformanceData {
-  id            String @default(cuid()) @id
-  name          String
-  avgRating     String
-  totalSales    String
-  numReview     Int
-  numLocation   Int? 
+  id          String @default(cuid()) @id
+  name        String
+  avgRating   String
+  totalSales  String
+  numReview   Int
+  numLocation Int?
 }
 model ComparePerformanceData {
-  id            String @default(cuid()) @id
-  name          String
-  avgRating     String
-  totalSales    String
-  numReview     Int
-  numLocation   Int? 
+  id          String @default(cuid()) @id
+  name        String
+  avgRating   String
+  totalSales  String
+  numReview   Int
+  numLocation Int?
 }
 model ComparationTag {
-  id              String            @default(cuid()) @id
-  locationTag     LocationTag?
-  businessTag     BusinessTag?
-  performance     Performance[]
-  news            News[]
+  id          String        @default(cuid()) @id
+  locationTag LocationTag?
+  businessTag BusinessTag?
+  performance Performance[]
+  news        News[]
 }
 model Performance {
-  id              String            @default(cuid()) @id
+  id              String                   @default(cuid()) @id
   type            PerformanceType
   locationTag     LocationTag?
   businessTag     BusinessTag?
   comparationTags ComparationTag[]
   data            PerformanceData[]
   compareData     ComparePerformanceData[]
-  createdAt       DateTime          @default(now())
-  updatedAt       DateTime          @updatedAt
+  createdAt       DateTime                 @default(now())
+  updatedAt       DateTime                 @updatedAt
 }
 model NewsData {
-  id            String @default(cuid()) @id
-  title         String
-  link          String
-  published     String
-  source        String
-  description   String 
-  relevance     Float
+  id          String @default(cuid()) @id
+  title       String
+  link        String
+  published   String
+  source      String
+  description String
+  relevance   Float
 }
 model CompareNewsData {
-  id            String @default(cuid()) @id
-  title         String
-  link          String
-  published     String
-  source        String
-  description   String 
-  relevance     Float
+  id          String @default(cuid()) @id
+  title       String
+  link        String
+  published   String
+  source      String
+  description String
+  relevance   Float
 }
 model News {
   id              String            @default(cuid()) @id
@@ -157,10 +157,63 @@
   updatedAt       DateTime          @updatedAt
 }
 model SearchLog {
-  id              String            @default(cuid()) @id
+  id          String       @default(cuid()) @id
+  locationTag LocationTag?
+  businessTag BusinessTag?
+  reviewTag   ReviewTag?
+  createdAt   DateTime     @default(now())
+}
+
+model ActivityTimes {
+  id   String @default(cuid()) @id
+  AM1  Int?
+  AM2  Int?
+  AM3  Int?
+  AM4  Int?
+  AM5  Int?
+  AM6  Int?
+  AM7  Int?
+  AM8  Int?
+  AM9  Int?
+  AM10 Int?
+  AM11 Int?
+  PM12 Int?
+  PM1  Int?
+  PM2  Int?
+  PM3  Int?
+  PM4  Int?
+  PM5  Int?
+  PM6  Int?
+  PM7  Int?
+  PM8  Int?
+  PM9  Int?
+  PM10 Int?
+  PM11 Int?
+  AM12 Int?
+}
+
+model ActivityData {
+  id           String        @default(cuid()) @id
+  name         String
+  location     String
+  activityData ActivityTimes
+}
+
+model CompareActivityData {
+  id           String        @default(cuid()) @id
+  name         String
+  location     String
+  activityData ActivityTimes
+}
+
+model Activity {
+  id              String                @default(cuid()) @id
   locationTag     LocationTag?
   businessTag     BusinessTag?
-  reviewTag       ReviewTag?
-  createdAt       DateTime          @default(now())
+  comparationTags ComparationTag[]
+  data            ActivityData[]
+  compareData     CompareActivityData[]
+  createdAt       DateTime              @default(now())
+  updatedAt       DateTime              @updatedAt
 }
```


