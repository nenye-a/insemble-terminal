# Migration `20200603135053-terminal-init`

This migration has been generated by RaymondAnggara at 6/3/2020, 1:50:53 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."PinnedFeed" (
    "id" text  NOT NULL ,
    "tableId" text  NOT NULL DEFAULT '',
    "tableType" text  NOT NULL DEFAULT 'PERFORMANCE',
    "terminal" text   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Terminal" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "description" text   ,
    "id" text  NOT NULL ,
    "name" text  NOT NULL DEFAULT '',
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "user" text   ,
    PRIMARY KEY ("id")
) 

ALTER TABLE "public"."PinnedFeed" ADD FOREIGN KEY ("terminal") REFERENCES "public"."Terminal"("id") ON DELETE SET NULL

ALTER TABLE "public"."Terminal" ADD FOREIGN KEY ("user") REFERENCES "public"."User"("id") ON DELETE SET NULL
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200602164616-ownership-init..20200603135053-terminal-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -36,8 +36,17 @@
   OWNERSHIP
   COVERAGE
 }
+enum TableType {
+  PERFORMANCE
+  NEWS
+  ACTIVITY
+  OWNERSHIP_INFO
+  OWNERSHIP_CONTACT
+  COVERAGE
+}
+
 enum OwnershipType {
   PROPERTY
   COMPANY
 }
@@ -53,8 +62,23 @@
   type   BusinessType
   params String
 }
+model PinnedFeed {
+  id        String    @default(cuid()) @id
+  tableType TableType
+  tableId   String
+}
+
+model Terminal {
+  id          String       @default(cuid()) @id
+  name        String
+  description String?
+  pinnedFeeds PinnedFeed[]
+  createdAt   DateTime     @default(now())
+  updatedAt   DateTime     @updatedAt
+}
+
 model User {
   id           String      @default(cuid()) @id
   email        String      @unique
   avatar       String?
@@ -64,8 +88,9 @@
   company      String
   title        String?
   description  String?
   address      String?
+  terminals    Terminal[]     
   searchLog    SearchLog[]
   pendingEmail Boolean     @default(false)
   createdAt    DateTime    @default(now())
 }
```


