# Migration `20200601195145-coverage-table-initial`

This migration has been generated by Nenye at 6/1/2020, 7:51:45 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."CoverageLocation" (
    "address" text   ,
    "coverageBusiness" text   ,
    "id" text  NOT NULL ,
    "lat" Decimal(65,30)  NOT NULL DEFAULT 0,
    "lng" Decimal(65,30)  NOT NULL DEFAULT 0,
    "name" text   ,
    "numReviews" Decimal(65,30)   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."CoverageBusiness" (
    "businessName" text   ,
    "compareCoverageData" text   ,
    "coverageData" text   ,
    "id" text  NOT NULL ,
    "numLocations" integer   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."CoverageData" (
    "coverage" text   ,
    "id" text  NOT NULL ,
    "location" text  NOT NULL DEFAULT '',
    "name" text  NOT NULL DEFAULT '',
    "numLocations" integer   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."CompareCoverageData" (
    "coverage" text   ,
    "id" text  NOT NULL ,
    "location" text  NOT NULL DEFAULT '',
    "name" text  NOT NULL DEFAULT '',
    "numLocations" integer   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Coverage" (
    "businessTag" text   ,
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "locationTag" text   ,
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    PRIMARY KEY ("id")
) 

ALTER TABLE "public"."ComparationTag" ADD COLUMN "coverage" text   ;

ALTER TABLE "public"."CoverageLocation" ADD FOREIGN KEY ("coverageBusiness") REFERENCES "public"."CoverageBusiness"("id") ON DELETE SET NULL

ALTER TABLE "public"."CoverageBusiness" ADD FOREIGN KEY ("coverageData") REFERENCES "public"."CoverageData"("id") ON DELETE SET NULL

ALTER TABLE "public"."CoverageBusiness" ADD FOREIGN KEY ("compareCoverageData") REFERENCES "public"."CompareCoverageData"("id") ON DELETE SET NULL

ALTER TABLE "public"."CoverageData" ADD FOREIGN KEY ("coverage") REFERENCES "public"."Coverage"("id") ON DELETE SET NULL

ALTER TABLE "public"."CompareCoverageData" ADD FOREIGN KEY ("coverage") REFERENCES "public"."Coverage"("id") ON DELETE SET NULL

ALTER TABLE "public"."Coverage" ADD FOREIGN KEY ("locationTag") REFERENCES "public"."LocationTag"("id") ON DELETE SET NULL

ALTER TABLE "public"."Coverage" ADD FOREIGN KEY ("businessTag") REFERENCES "public"."BusinessTag"("id") ON DELETE SET NULL

ALTER TABLE "public"."ComparationTag" ADD FOREIGN KEY ("coverage") REFERENCES "public"."Coverage"("id") ON DELETE SET NULL
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200601150825-activity-table-initial..20200601195145-coverage-table-initial
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -216,4 +216,47 @@
   compareData     CompareActivityData[]
   createdAt       DateTime              @default(now())
   updatedAt       DateTime              @updatedAt
 }
+
+model CoverageLocation {
+  id         String  @default(cuid()) @id
+  lat        Float
+  lng        Float
+  name       String?
+  address    String?
+  numReviews Float?
+}
+
+model CoverageBusiness {
+  id           String             @default(cuid()) @id
+  businessName String?
+  numLocations Int?
+  locations    CoverageLocation[]
+}
+
+model CoverageData {
+  id           String             @default(cuid()) @id
+  name         String
+  location     String
+  numLocations Int?
+  coverageData CoverageBusiness[]
+}
+
+model CompareCoverageData {
+  id           String             @default(cuid()) @id
+  name         String
+  location     String
+  numLocations Int?
+  coverageData CoverageBusiness[]
+}
+
+model Coverage {
+  id              String                @default(cuid()) @id
+  locationTag     LocationTag?
+  businessTag     BusinessTag?
+  comparationTags ComparationTag[]
+  data            CoverageData[]
+  compareData     CompareCoverageData[]
+  createdAt       DateTime              @default(now())
+  updatedAt       DateTime              @updatedAt
+}
```


